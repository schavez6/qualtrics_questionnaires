Prepare Kid-COPE Data # Do not submit to RDOC
```{r}
KCope <-left_join(filter(cleaned_survey_data, grepl("KCOPE",item)) %>%
                 mutate(value=as.numeric(value)) %>% 
                 filter(!is.na(value)) %>%
                 filter(!value=="") %>%
                 distinct(tagid,item,value,survey_name,.keep_all = FALSE) %>%
                 spread(item,value),
               redcap_cleaned %>%
                 filter(!is.na(dob),!is.na(sa_date)) %>%
                 dplyr::select(tagid, sa_date, sb_date, dob),by="tagid")         

KCope_Wave1<-left_join(KCope,survey_date, by = c("tagid","survey_name")) %>% 
  distinct(tagid,survey_name,.keep_all = TRUE) %>%
  mutate(qualtrics_date=value) %>%
  dplyr::select(-value)%>%
  mutate(survey_date=ifelse(survey_name=="TAG - Sess 2 - V1",sb_date,
                            ifelse(survey_name=="TAG - Sess 2 - V2",sb_date,
                                   ifelse(survey_name=="TAG - Sess 2 - V3 - Current",sb_date,
                                          ifelse(survey_name=="Sensitive Q's for 042",sb_date,as.character(qualtrics_date)
                                          ))))) %>%
  dplyr::select(-qualtrics_date,-sb_date,-sa_date,-dob)

#save it
KCope_WaveACE1_outdf <- KCope_Wave1 %>% filter(grepl("Month 1",survey_name))
write.csv(KCope_WaveACE1_outdf, file = paste0(workdir,"Qualtrics_Output/WaveACE1/KCope_WaveACE1_rawdata.csv"))

KCope_WaveACE2_outdf <- KCope_Wave1 %>% filter(grepl("Month 2",survey_name))
write.csv(KCope_WaveACE2_outdf, file = paste0(workdir,"Qualtrics_Output/WaveACE2/KCope_WaveACE2_rawdata.csv"))

KCope_WaveACE3_outdf <- KCope_Wave1 %>% filter(grepl("Month 3",survey_name))
write.csv(KCope_WaveACE3_outdf, file = paste0(workdir,"Qualtrics_Output/WaveACE3/KCope_WaveACE3_rawdata.csv"))

#SAM - Need to finish this#
```
